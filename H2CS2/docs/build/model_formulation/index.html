<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Formulation · H2CS2</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">H2CS2</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Model</span><ul><li><a class="tocitem" href="../model_overview/">Model Overview</a></li><li><a class="tocitem" href="../model_notation/">Notation</a></li><li class="is-active"><a class="tocitem" href>Formulation</a></li><li><a class="tocitem" href="../model_coefficients/">Coefficients</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Model</a></li><li class="is-active"><a href>Formulation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Formulation</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/8Hammy8/Case-Study-ETH/blob/main/H2CS2/docs/src/model_formulation.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Model-Formulation"><a class="docs-heading-anchor" href="#Model-Formulation">Model Formulation</a><a id="Model-Formulation-1"></a><a class="docs-heading-anchor-permalink" href="#Model-Formulation" title="Permalink"></a></h1><p>The model code is divided into four sections. Each code file sets up a portion of the final model.  Description of all models and variables in the model can be found below.</p><ol><li><strong>setup_base.jl</strong></li><li><strong>setup_storage.jl</strong></li><li><strong>setup_transport.jl</strong></li><li><strong>setup_policy.jl</strong></li><li><strong>setup_mass_balance.jl</strong></li></ol><article class="docstring"><header><a class="docstring-binding" id="H2CS2.setup_base" href="#H2CS2.setup_base"><code>H2CS2.setup_base</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">setup_base(model::Model, inputs::InputStruct)</code></pre><p>Establish an economic dispatch problem with all components except the mass  balance constraint. </p><p>The returned model has the following formulation:</p><p class="math-container">\[\begin{aligned}
    \min  \quad  &amp;\sum_{i \in P} \sum_{y \in Y } \delta_y C_{i,y}^I a_{i,y}+
    \sum_{i \in P}\sum_{y \in Y} \delta_y C_{i,y}^F (b_{i,y} + a_{i,y} - r_{i,y}) +\\
    &amp;\sum_{i \in P}\sum_{y \in Y} \sum_{h \in H} \delta_y w_h C^V_{i,y,h} q_{i,y,h} 
\end{aligned}\]</p><p class="math-container">\[\text{subject to}\]</p><p>Producer availability: </p><p class="math-container">\[    0 \leq q_{i,y,h} \leq \Gamma_{i,y,h} (b_{i,y} + a_{i,y} - r_{i,y}) \qquad\forall i, y , h\]</p><p>Added capacity restrictions:</p><p class="math-container">\[    0 \leq a_{i,y} \leq A_{i,y}^{max} \qquad\forall i, y\]</p><p>Retired capacity restrictions:</p><p class="math-container">\[  0\leq r_{i,y} \leq b_{i,y} \qquad\forall i,y\]</p><p>Annual capacity transfers:</p><p class="math-container">\[   b_{i,y} = b_{i,y-1} + a_{i,y-1} -r_{i,y-1} \qquad\forall y&gt;0, i\]</p><p>Initial Capacity:</p><p class="math-container">\[    b_{i,0} = B_{i,0} \qquad\forall i\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/8Hammy8/Case-Study-ETH/blob/0065b84fefdbced607cd166571a792345ce300ac/H2CS2/src/02_setup/setup_base.jl#L7-L53">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="H2CS2.setup_storage" href="#H2CS2.setup_storage"><code>H2CS2.setup_storage</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">setup_storage(model::Model, inputs::InputStruct)</code></pre><p>This function modifies the model created by &quot;setup_base&quot; in order to add storage units to the model.</p><p>These units store energy within a given simulation year. The storage levels at the beginning of the year are optimized by the model. Each storage resevoir may thus begin the year either full, empty, or anywhere in between. At the end of each  year, the storge unit must return to the same level as at the beginning.</p><p>Storage units have two different types of capacity. The first, henceforth refered to as charge/discharge capacity, indicates the rate at which hydrogen can be added or removed  from the resevoir. This capacity is analagous to the &quot;power capacity&quot; of battery storage systems. In our model, we determine this capacity endogenously, meaning that the model can choose how much to build or retire. The second capacity, henceforth called the storage  capacity, indicates the total quantity of hydrogen that can be held in a given storage unit. This is analagous to the &quot;energy capacity&quot; of battery storage systems. In our model, the  storage capacity is an exogenous input parameter.</p><p>To implement storage, we make the following modifications to the model:</p><p class="math-container">\[\begin{aligned}
    Objective \mathrel{+}=&amp;\sum_{j \in S} \sum_{y \in Y } \delta_y C_{j,y}^I a_{j,y}+
    \sum_{j \in S}\sum_{y \in Y} \delta_y C_{j,y}^F (b_{j,y} + a_{j,y} - r_{j,y}) +\\
    &amp;\sum_{j \in S}\sum_{y \in Y} \sum_{h \in H} \delta_y w_h C^V_{j,y,h} q_{i,y,h}^c 
\end{aligned}\]</p><p>Storage charge availability</p><p class="math-container">\[0 \leq q_{j,y,h}^c \leq \Gamma_{j,y,h} (b_{j,y} + a_{j,y} - r_{j,y}) \qquad\forall j, y , h\]</p><p>Storage discharge availability</p><p class="math-container">\[0 \leq q_{j,y,h}^d \leq \Gamma_{j,y,h} (b_{j,y} + a_{j,y} - r_{j,y}) \qquad\forall j, y , h\]</p><p>Added charge/discharge capacity restrictions</p><p class="math-container">\[0 \leq a_{j,y} \leq A_{j,y}^{max} \qquad\forall j, y\]</p><p>Retired capacity restrictions</p><p class="math-container">\[0\leq r_{j,y} \leq b_{j,y} \qquad\forall j,y\]</p><p>Annual capacity transfers</p><p class="math-container">\[b_{j,y} = b_{j,y-1} + a_{j,y-1} -r_{j,y-1} \qquad\forall y&gt;0, j\]</p><p>Initial charge/discharge capacity</p><p class="math-container">\[b_{j,0} = B_{j,0} \qquad\forall i\]</p><p>Maximum storage capacity</p><p class="math-container">\[0\leq s_{j,y,h} \leq S_{j}^{max} \qquad \forall j\]</p><p>Storage levels after charging and discharging</p><p class="math-container">\[s_{j,y,h} = (1- \lambda_{j})^{w_{h}}s_{j,y-1,h} + \eta_j^c  w_h q^{c}_{j,y,h}  - \frac{q_{j,y,h}^d w_h}{\eta_j^{d}} \qquad \forall j,y,h\]</p><p>The last constraint is set to be periodic, so that the state of charge at  the end of each year is the same as at the beginning of the year.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/8Hammy8/Case-Study-ETH/blob/0065b84fefdbced607cd166571a792345ce300ac/H2CS2/src/02_setup/setup_storage.jl#L2-L76">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="H2CS2.setup_transport" href="#H2CS2.setup_transport"><code>H2CS2.setup_transport</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">setup_transport(model::Model, inputs::InputStruct)</code></pre><p>This function modifies the base model by adding regional transportation.</p><p>The following equations are added to the model:</p><p class="math-container">\[    Objective \mathrel{+}= \sum_{e \in E} \sum_{y \in Y}\sum_{h \in H} \delta_y w_h C^{Trans}_{e,y} f_{e,y,h}\]</p><p>Flow limits:</p><p class="math-container">\[    0 \leq f_{r,j,y,h} \leq F_{r,j,y}^{max}\qquad \forall r,j,y,h\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/8Hammy8/Case-Study-ETH/blob/0065b84fefdbced607cd166571a792345ce300ac/H2CS2/src/02_setup/setup_transport.jl#L3-L18">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="H2CS2.setup_policy" href="#H2CS2.setup_policy"><code>H2CS2.setup_policy</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">setup_policy(model::Model, inputs::InputStruct)</code></pre><p>This function modifies the base model by adding a carbon tax.</p><p>The carbon tax is implemented as a variable production cost in the objective function. In  the future, this function could be expanded to allow for more complex policies.</p><p class="math-container">\[    Objective \mathrel{+}= \sum_{i \in P}\sum_{y \in Y} \sum_{h \in H} \delta_y w_h \tau_{CO_2} q_{i,y,h} \epsilon_{i}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/8Hammy8/Case-Study-ETH/blob/0065b84fefdbced607cd166571a792345ce300ac/H2CS2/src/02_setup/setup_policy.jl#L3-L15">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="H2CS2.setup_mass_balance" href="#H2CS2.setup_mass_balance"><code>H2CS2.setup_mass_balance</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">setup_mass_balance(model::Model, inputs::InputStruct)</code></pre><p>This function modifies the model by adding regional mass balance constraints </p><p>The added constraint is shown below. In the constraint formulation, <span>$P_r$</span>, <span>$S_r$</span>, and <span>$K_r$</span> represent the producers, storage units, and consumers that are located  in region <span>$r$</span>.</p><p>Mass balance:</p><p class="math-container">\[\begin{aligned}
    0 =&amp;\sum_{i\in P_r} q_{i,y,h} + \sum_{j\in S_r} (q_{j,y,h}^d-q_{j,y,h}^c)\\
    &amp; - \sum_{k \in K_r} D_{i,h,r} -\sum_{\substack{e \in E\\ \text{s.t}\: e = (r,j)}} (f_{e,y,h}) + \sum_{\substack{e \in E\\ \text{s.t}\: e = (j,r)} } (f_{e,y,h}) \qquad\forall r, y, h
\end{aligned}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/8Hammy8/Case-Study-ETH/blob/0065b84fefdbced607cd166571a792345ce300ac/H2CS2/src/02_setup/setup_mass_balance.jl#L3-L19">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../model_notation/">« Notation</a><a class="docs-footer-nextpage" href="../model_coefficients/">Coefficients »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Friday 12 May 2023 14:01">Friday 12 May 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
